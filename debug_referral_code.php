<?php\n\nrequire_once __DIR__ . '/vendor/autoload.php';\n\nuse Illuminate\\Support\\Facades\\DB;\nuse Illuminate\\Support\\Facades\\Cache;\nuse App\\Models\\User;\nuse App\\Services\\ReferralCodeService;\n\n// Create a user\n$user = User::factory()->create();\n\necho \"User ID: \" . $user->id . \"\\n\";\necho \"User referral_code (direct): \" . $user->referral_code . \"\\n\";\necho \"User referral_code (from DB): \" . $user->getAttributes()['referral_code'] ?? 'NULL' . \"\\n\";\n\n// Check if it's in the database\n$dbUser = DB::table('users')->where('id', $user->id)->first();\necho \"DB referral_code: \" . ($dbUser->referral_code ?? 'NULL') . \"\\n\";\n\n// Test ReferralCodeService\n$codeService = new ReferralCodeService();\n$foundUser = $codeService->getUserByReferralCode($user->referral_code);\n\nif ($foundUser) {\n    echo \"Found user via ReferralCodeService: \" . $foundUser->id . \"\\n\";\n} else {\n    echo \"No user found via ReferralCodeService\\n\";\n}\n\n// Check if the code is valid\n$isValid = $codeService->isValid($user->referral_code);\necho \"Is referral code valid? \" . ($isValid ? 'Yes' : 'No') . \"\\n\";\n